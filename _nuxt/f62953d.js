(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{438:function(e,t,l){var content=l(442);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(64).default)("15ee5478",content,!0,{sourceMap:!1})},441:function(e,t,l){"use strict";l(438)},442:function(e,t,l){var n=l(63)(!1);n.push([e.i,'.home-page .vertical-panes{display:flex;justify-content:space-between;align-items:flex-start}.home-page .vertical-panes .pane{flex:1;background:#fff;border-radius:.8rem;min-height:calc(100vh - 200px)}.home-page .vertical-panes .pane:not(:last-child){margin-right:2rem}.home-page .vertical-panes .pane .pane-title{display:flex;justify-content:space-between;align-items:center;padding:1rem;border-bottom:2px solid #000}.home-page .vertical-panes .pane .pane-title .title{font-weight:600;font-size:1.6rem}.home-page .vertical-panes .pane .pane-content{padding:1rem}.home-page .mails-list{list-style-type:none;padding:1rem;height:100%;overflow-y:auto}.home-page .mails-list .mail{margin-bottom:1rem;padding:1rem;cursor:pointer}.home-page .mails-list .mail:not(:last-child){padding-top:1rem;padding-bottom:1rem;border-bottom:1px solid #ccc}.home-page .mails-list .mail.booked .details:before{background-color:#00897b}.home-page .mails-list .mail.unread .details:before{background-color:#00b5df}.home-page .mails-list .mail:hover{background:#fafcfe}.home-page .mails-list .mail .details{display:flex;justify-content:space-between;align-items:flex-start;position:relative;margin-bottom:1rem}.home-page .mails-list .mail .details:before{content:"";position:absolute;left:0;top:0;width:4px;height:100%;border-radius:10px;background-color:#627e90}.home-page .mails-list .mail .details .from{font-weight:600;color:#000;font-size:1.6rem;margin-left:1rem}.home-page .mails-list .mail .details .date-time{font-weight:light;color:#373736;font-size:1.2rem}.home-page .mails-list .mail .subject{font-weight:400;font-size:1.6rem;color:#000}.home-page .mails-list .mail .summary{font-weight:400;font-size:1.4rem;color:#373736;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.home-page .mail-content{padding:1}.home-page .rate-plans{list-style-type:none;padding:1rem}.home-page .rate-plans .rate-plan{display:flex;justify-content:flex-start;cursor:pointer}.home-page .rate-plans .rate-plan:not(:last-child){margin-bottom:2rem}.home-page .rate-plans .rate-plan.selected .name{color:#00897b}.home-page .rate-plans .rate-plan .details .name{display:flex;justify-content:space-between;font-weight:600;font-size:1.6rem}.home-page .rate-plans .rate-plan .details .desc{padding:1rem;background:#fafcfe;font-size:1.4rem;border:1px dashed #627e90;border-radius:.8rem}',""]),e.exports=n},444:function(e,t,l){"use strict";l.r(t);l(30),l(40),l(29),l(39),l(61),l(33),l(62);var n=l(23),o=(l(269),l(12),l(59));function r(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(object);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,l)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={name:"IndexPage",data:function(){return{mailContent:null,basicInfo:null,avgRates:[],ratePlans:[],selectedPlan:1,model:{name:null,surname:null,hotel:null,room:null,start_date:null,end_date:null,prefix:null},rules:{prefix:[{required:!0,message:"Please enter prefix.",trigger:"blur"}],name:[{required:!0,message:"Please enter name.",trigger:"blur"}],surname:[{required:!0,message:"Please enter surname.",trigger:"blur"}],hotel:[{required:!0,message:"Please enter hotel.",trigger:"blur"}],room:[{required:!0,message:"Please enter room.",trigger:"blur"}],start_date:[{required:!0,message:"Please enter start date.",trigger:"blur"}],end_date:[{required:!0,message:"Please enter end date.",trigger:"blur"}]},error:null}},computed:m(m({},Object(o.b)({mails:"getMails",mail:"getMail"})),{},{payload:function(){var e=this,t={};return this.selectedPlan&&(t={RatePlanCode:this.selectedPlan.RatePlanCode,RatePlanType:this.selectedPlan.RatePlanType,RoomTypeCode:this.avgRates.find((function(a){return a.RatePlanCode===e.selectedPlan.RatePlanCode})).RoomTypeCode}),m(m({},this.mail),{},{chosen_plan:t})}}),watch:{mail:function(e){var t=this;if(e&&"Error No product found for this date"===e)this.error=e;else if(e){this.basicInfo=e.info[0].Information,this.avgRates=e.roomAvailability.ResponseData.RoomStays[0].AllRoomTypes[0].AverageRates,this.ratePlans=e.roomAvailability.ResponseData.RoomStays[0].RatePlans;var l=this.ratePlans.find((function(p){return parseFloat(p.LeadRate)===parseFloat(t.basicInfo["Net price"])}));this.selectedPlan=l||null,this.model.hotel=this.basicInfo.Hotel,this.model.room=this.basicInfo.RoomType,this.model.start_date=this.basicInfo["Check-in date"],this.model.end_date=this.basicInfo["Check-out date"],this.model.prefix=this.basicInfo["Guest Details"][0].title,this.model.name=this.basicInfo["Guest Details"][0].first_name,this.model.surname=this.basicInfo["Guest Details"][0].last_name}}},mounted:function(){this.$store.dispatch("fetchMails")},methods:{handleMailSelection:function(e){this.error=null,this.mailContent=e.html,this.$store.dispatch("fetchMail",e.uid)},handleClearMail:function(){this.mailContent=null,this.error=null},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$store.dispatch("submitMail",t.payload)}))},resetForm:function(e){this.$refs[e].resetFields()}}},d=(l(441),l(80)),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"home-page"},[t("div",{staticClass:"vertical-panes"},[t("div",{staticClass:"pane"},[t("div",{staticClass:"pane-title"},[t("div",{staticClass:"title"},[e._v("\n          All Mails\n        ")]),e._v(" "),t("div",{staticClass:"actions"},[t("el-tag",{attrs:{size:"small",type:"success",effect:"dark"}},[e._v("\n            Booked\n          ")]),e._v(" "),t("el-tag",{attrs:{size:"small",type:"info",effect:"dark"}},[e._v("\n            Unread\n          ")]),e._v(" "),t("el-tag",{attrs:{size:"small",type:"primary",effect:"dark"}},[e._v("\n            Read\n          ")])],1)]),e._v(" "),t("div",{staticClass:"pane-content"},[t("ul",{staticClass:"mails-list"},[e._l(e.mails,(function(l,n){return[t("li",{key:n,staticClass:"mail",class:[{booked:l.already_booked,unread:!l.seen}],on:{click:function(t){return e.handleMailSelection(l)}}},[t("div",{staticClass:"details"},[t("div",{staticClass:"from"},[e._v("\n                  "+e._s(l.subject)+"\n                ")]),e._v(" "),t("div",{staticClass:"date-time"},[e._v("\n                  "+e._s(new Intl.DateTimeFormat("en-GB",{dateStyle:"medium",timeStyle:"short"}).format(new Date(l.date)))+"\n                ")])]),e._v(" "),t("div",{staticClass:"summary"},[e._v("\n                "+e._s(l.content)+"\n              ")])])]}))],2)])]),e._v(" "),t("div",{staticClass:"pane"},[t("div",{staticClass:"pane-title"},[t("div",{staticClass:"title"},[e._v("\n          Mail Preview\n        ")]),e._v(" "),t("div",{staticClass:"actions"},[e.mailContent?t("el-button",{attrs:{plain:"",type:"danger",size:"mini"},on:{click:e.handleClearMail}},[e._v("\n            Clear\n          ")]):e._e()],1)]),e._v(" "),t("div",{staticClass:"pane-content"},[t("div",{staticClass:"mail-content"},[e.mailContent?t("div",{domProps:{innerHTML:e._s(e.mailContent)}}):t("el-empty",{attrs:{description:"Please select an Email"}})],1)])]),e._v(" "),t("div",{staticClass:"pane"},[t("div",{staticClass:"pane-title"},[t("div",{staticClass:"title"},[e._v("\n          Booking Details\n        ")]),e._v(" "),t("div",{staticClass:"actions"},[e.mailContent&&!e.error?t("el-button",{attrs:{plain:"",type:"success",size:"mini"},on:{click:function(t){return e.submitForm("bookingForm")}}},[e._v("\n            Book\n          ")]):e._e()],1)]),e._v(" "),t("div",{staticClass:"pane-content"},[e.mailContent&&!e.error?t("el-form",{ref:"bookingForm",staticClass:"bookingForm",attrs:{model:e.model,rules:e.rules,"label-width":"120px","label-position":"top"}},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"Hotel",prop:"hotel"}},[t("el-input",{attrs:{placeholder:"Enter Hotel","prefix-icon":"ri-hotel-line"},model:{value:e.model.hotel,callback:function(t){e.$set(e.model,"hotel",t)},expression:"model.hotel"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"Room",prop:"room"}},[t("el-input",{attrs:{placeholder:"Enter Room","prefix-icon":"ri-home-line"},model:{value:e.model.room,callback:function(t){e.$set(e.model,"room",t)},expression:"model.room"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"Start Date",prop:"start_date"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"Pick Start Date","value-format":"YYYY-mm-dd"},model:{value:e.model.start_date,callback:function(t){e.$set(e.model,"start_date",t)},expression:"model.start_date"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"End Date",prop:"end_date"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"Pick End Date","value-format":"YYYY-mm-dd"},model:{value:e.model.end_date,callback:function(t){e.$set(e.model,"end_date",t)},expression:"model.end_date"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"Prefix",prop:"prefix"}},[t("el-input",{attrs:{placeholder:"Enter Prefix","prefix-icon":"ri-contacts-line"},model:{value:e.model.prefix,callback:function(t){e.$set(e.model,"prefix",t)},expression:"model.prefix"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"Name",prop:"name"}},[t("el-input",{attrs:{placeholder:"Enter Name","prefix-icon":"ri-contacts-line"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"Surname",prop:"surname"}},[t("el-input",{attrs:{placeholder:"Enter Surname","prefix-icon":"ri-contacts-line"},model:{value:e.model.surname,callback:function(t){e.$set(e.model,"surname",t)},expression:"model.surname"}})],1)],1)],1),e._v(" "),t("el-divider",[e._v("Available Plans")]),e._v(" "),t("ul",{staticClass:"rate-plans"},e._l(e.ratePlans,(function(l,n){return t("li",{key:n,staticClass:"rate-plan",class:{selected:l.RatePlanCode==e.selectedPlan.RatePlanCode},on:{click:function(t){e.selectedPlan=l}}},[t("div",{staticClass:"details"},[t("div",{staticClass:"name"},[t("span",[e._v(e._s(l.RatePlanName)+" "),l.RatePlanCode==e.selectedPlan.RatePlanCode?t("i",{staticClass:"ri-check-line"}):e._e()]),e._v(" "),t("div",{staticClass:"price"},[e._v("\n                    "+e._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"AED"}).format(l.LeadRate))+"\n                  ")])]),e._v(" "),t("div",{staticClass:"desc",domProps:{innerHTML:e._s(l.RatePlanDescription)}})])])})),0)],1):t("el-empty",{attrs:{description:e.error?e.error:"Please select an Email"}})],1)])])])}),[],!1,null,null,null);t.default=component.exports}}]);